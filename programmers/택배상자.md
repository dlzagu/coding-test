```js
function solution(order) {
  let answer = 0;
  const belt = [...order].sort((a, b) => a - b);
  let orderQueue = order.shift();
  const assistant = [];

  while (belt.length) {
    const beltQueue = belt.shift();
    console.log(orderQueue);
    if (orderQueue === beltQueue) {
      answer++;
      orderQueue = order.shift();
    } else {
      if (orderQueue === assistant[assistant.length - 1]) {
        assistant.shift();
        orderQueue = order.shift();
        answer++;
      } else {
        assistant.push(beltQueue);
      }
    }
  }

  while (assistant.length) {
    const assistantStack = assistant.pop();
    if (orderQueue !== assistantStack) {
      break;
    } else {
      answer++;
      orderQueue = order.shift();
    }
  }

  return answer;
}
```
